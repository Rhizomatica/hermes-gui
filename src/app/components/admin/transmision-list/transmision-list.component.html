<loading [loading]="loading"></loading>
<div>
  <div class="overall alert" *ngIf="confirmTransmit">
    <div class="cv">
      <span i18n="@@ysyncronizenow">Are you sure you want to synchronize now? <br /> This should be used only in
        case of emergency<br /></span>
      <div class="icon m-t-10">
        <a (click)="closeOveralTransmision()">
          <button i18n="@@cancelsTransmision">
            cancel
          </button>
        </a>
      </div>
      <div class="icon m-t-10">
        <a (click)="transmitNow()">
          <button i18n="@@transmits">
            transmit now
          </button>
        </a>
      </div>
    </div>
  </div>
  <div *ngIf="isadmin">
    <div class="flexible">
      <h2 i18n="@@transmisionlistt">Transmission list</h2>
    </div>
    <p i18n="@@listsize" class="m-t-10">Total size of files to transmit: {{ queueSize }} B</p>
    <div class="alert" *ngIf="noUUcp" i18n="@@cannotaccessuucp">Alert: Cannot access transmission list<br /></div>
    <div class="alert" *ngIf="noQueue" i18n="@@noqueue">There are no messages to transmit<br /></div>
    <div class="queue messages m-t-25">
      <div class="multiplist1">
        <div *ngFor="let job of queue" class="item">
          <div class="maininfo">
            <a>
              <span *ngIf="isadmin">
                <img class="inlineicon" title="cancel mail" src="assets/svg/trash-alt.svg" *ngIf="job.type!=='HMP'"
                  (click)="cancelMail(job.uuidhost,job.uuiduucp)">
                <img class="inlineicon" title="cancel message" src="assets/svg/trash-alt.svg" *ngIf="job.type=='HMP'"
                  (click)="confirmCancelTransmission()">

                <div class="overall alert" *ngIf="deleteMessage">
                  <div class="cv">
                    <span i18n="@@deletetransmissionconfirmation">Are you sure you want to cancel this
                      transmission?</span>
                    <div class="row">
                      <button (click)="confirmCancelTransmission()"
                        i18n="@@canceloperationcanceltransmission">cancel</button>
                      <button class="m-l-10" (click)="cancelTransmision(job.uuidhost,job.uuiduucp)"
                        i18n="@@confirmcanceltransmission">confirm</button>
                    </div>
                  </div>
                </div>
              </span>
            </a>
            <div class="row">
              <span>{{job.time}} {{job.date}} </span>
            </div>
          </div>
          <div class="info">
            <div class="row">
              <span>
                <img class="inlineiconj" src="assets/svg/envelope.svg" *ngIf="job.type!=='HMP'">
                <img class="inlineiconj" src="assets/svg/comment.svg" *ngIf="job.type=='HMP'">
              </span>
              <span *ngIf="job.type!=='HMP'">{{job.emails}}</span>
              <span *ngIf="job.type=='HMP'">{{job.uuiduucp}}</span>
            </div>
            <div class="row">
              <span i18n="@@destinationt"> Destination:</span>{{job.uuidhost}}
            </div>
            <div class="row">
              <span i18n="@@destisizet">Size:</span> {{job.size}} B
            </div>
            <div class="row" *ngIf="jobToForce && jobToForce.uuiduucp === job.uuiduucp">
              <a i18n="@@forcetransmitting">Transmitting... </a>
            </div>
          </div>
          <div class="row-reverse">
            <button *ngIf="isadmin && !jobToForce" (click)="confTransmit(job)">
              <span i18n="@@transmitnow">force</span> <img class="inlineiconlink" title="force"
                src="assets/svg/arrow-right.svg" [hidden]="!isadmin">
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="overall alert" *ngIf="errorAlert==true">
    <div class="cv">
      <span i18n="@@errorprocessing">There was an error on processing your request <br /><br /></span>
      <!-- <span>{{error}}</span> -->
      <div class="icon"><a (click)="closeError()">
          <img title="compose" src="assets/svg/x.svg"></a>
      </div>
    </div>
  </div>
</div>