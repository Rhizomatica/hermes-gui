<loading [loading]="loading"></loading>
<div class="flexible">
    <h2 i18n="@@gpsgeolocation">GPS Geolocation</h2>
    <hint [showHint]="false" [hint]="'gpshint'"></hint>
</div>
<div class="row m-t-10">
    <p class="location">
        <span i18n="@@latitude">Latitude:</span> {{currentLatitude}},
        <span i18n="@@longitude">Longitude:</span> {{currentLongitude}}
    </p>
</div>
<div class="row">
    <div id="chartmap"></div>
</div>
<div class="m-t-25">
    <div class="flexible">
        <div class="half-row" *ngIf="files">
            <span i18n="@@geolocationfilestitle">Stored geolocation files</span>
            <div class="gps-stored-files">
                <div class="m-t-25" *ngFor="let file of files">
                    <a href="{{urlDownloadFile}}/{{file}}">
                        <img class="inlineicon" title="download" src="assets/svg/arrow-down.svg">{{file}}</a>
                </div>
                <div class="m-t-10" *ngIf="!files || files.length == 0">
                    <p i18n="@@emptyfileslist">
                        There are no stored geolocation files
                    </p>
                </div>
            </div>
            <div class="row m-t-10 m-b-10">
                <a href="{{urlDownloadAll}}"><button i18n="@@downloadall">download all</button></a>
                <button class="m-l-10" i18n="@@deletedall" (click)="deleteAllStoredFiles()">delete all</button>
            </div>
        </div>
        <div class="flex-right half-row">
            <div class="row">
                <form #formToggleGPS="ngForm" class="formdata">
                    <span i18n="@@gpsmanagement">GPS management</span>
                    <div class="float-right flex-right" *ngIf="admin">
                        <span>OFF</span>
                        <div class="switch">
                            <input type="checkbox" name="status" [checked]="status">
                            <span class="slider round-uc" (click)="toggleGPS(formToggleGPS)"></span>
                        </div>
                        <span>ON</span>
                    </div>
                    <div class="float-right flex-right" *ngIf="!admin">
                        {{status == true ? 'ON' : 'OFF'}}
                    </div>
                </form>
                <div class="row m-t-25">
                    <form #formGpsInterval="ngForm" class="formdata">
                        <span i18n="@@captureinterval">Capture interval</span> (sec)
                        <div class="flexible m-t-10">
                            <input type="number" name="interval" [(ngModel)]="interval" [disabled]="!admin" [min]="1"
                                [max]="180" />
                            <button (click)="updateGPSInterval(formGpsInterval)" i18n="@@update"
                                [disabled]="!admin">update</button>
                        </div>
                    </form>
                </div>
                <div class="row m-t-25">
                    <form #formFileRange="ngForm" class="formdata">
                        <span i18n="@@capturefilerange">Capture file range</span> (sec)
                        <div class="flexible m-t-10">
                            <input type="number" name="range" [(ngModel)]="range" [disabled]="!admin" [min]="240"
                                [max]="86400" />
                            <button (click)="updateGPSFileRange(formFileRange)" i18n="@@update"
                                [disabled]="!admin">update</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>