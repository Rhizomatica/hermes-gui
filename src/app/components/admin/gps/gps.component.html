<loading [loading]="loading"></loading>
<div class="flexible m-t-25">
    <h2 i18n="@@gpsgeolocation">GPS Geolocation</h2>
    <hint [showHint]="false" [hint]="'gpshint'"></hint>
</div>
<div *ngIf="currentUser.admin" class="m-t-25">
    <div class="flexible">
        <div class="half-row" *ngIf="files">
            <p i18n="@@geolocationfilestitle">Stored geolocation files</p>
            <hr />
            <div class="m-t-25" *ngFor="let file of files">
                <p (click)="dowloadFile(file)">
                    <img class="inlineicon" title="download" src="assets/svg/arrow-down.svg">
                    {{file}}
                </p>
            </div>
            <div class="m-t-10" *ngIf="!files">
                <p i18n="@@emptyfileslist">
                    There are no stored geolocation files
                </p>
            </div>
        </div>

        <div class="flex-right half-row">
            <div class="row">
                <p i18n="@@gpsconfigurationstitle">GPS configurations</p>
                <hr />
                <div class="row m-t-25">
                    <form #formDelayGps="ngForm">
                        <span i18n="@@recorddelay">Record delay</span> (sec)
                        <div class="flexible m-t-10">
                            <input type="number" name="delay" class="midbt" [(ngModel)]="delay"
                                [disabled]="!currentUser.admin" [min]="1" [max]="120" />
                            <button class="midbt" (click)="updateGPSDelay(formDelayGps)" i18n="@@update"
                                [disabled]="!currentUser.admin">update</button>
                        </div>
                    </form>
                </div>
                <div class="row m-t-25">
                    <form #formFileDumpTime="ngForm">
                        <span i18n="@@filedumptime">File dump time</span> (sec)
                        <div class="flexible m-t-10">
                            <input type="number" name="dump" class="midbt" [(ngModel)]="dump"
                                [disabled]="!currentUser.admin" [min]="600" [max]="3600" />
                            <button class="midbt" (click)="updateGPSFileDumpTime(formFileDumpTime)" i18n="@@update"
                                [disabled]="!currentUser.admin">update</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div *ngIf="!currentUser.admin">
    <span i18n="@@needtobeadmin">
        Need to be an admin to access this
    </span>
</div>